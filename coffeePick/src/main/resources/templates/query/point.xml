<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cp.user.point.dao.PointDAO">



	<select id="pointInfo" parameterType="point" resultType="point">
		SELECT
		member_id,point_total
		FROM point
		WHERE member_id=#{member_id}
	</select>

	<select id="pointHistoryInfo" parameterType="pointHistory"
		resultType="pointHistory">
		SELECT
		point_history_no,
		point_history_date,
		point_history_amount,
		point_history_reason,
		member_id
		FROM point_history
		WHERE
		member_id=#{member_id}
	</select>



	<update id="updatePoint" parameterType="point">
		UPDATE point
		SET
		point_total = point_total + #{point_total}
		WHERE member_id =
		#{member_id}
	</update>

	<insert id="pointHistoryInsert" parameterType="pointHistory">
		INSERT INTO
		point_history(
		point_history_no,
		point_history_date,
		point_history_amount,
		point_history_reason,
		member_id)
		VALUES(
		point_history_seq.nextval,
		DEFAULT,
		#{point_history_amount},
		#{point_history_reason},
		#{member_id}
		)
	</insert>


</mapper>